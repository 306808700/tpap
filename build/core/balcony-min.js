(function(j,b,g){var d=g,f="r3001",c=location&&(location.search||"").indexOf("caja-debug")!==-1?"http://assets.daily.taobao.net/apps/taesite/balcony/core/":"http://a.tbcdn.cn/apps/taesite/balcony/core/";var a=c+f+"/caja/";var i="J_TScriptedModule";var e={};var h={};h.addModsCajoledJS=function(k,l){if(arguments.length<2){return}if(!d.isString(k)){return}e[k]=e[k]||";"+l+";"};h.getModsCajoledJS=function(k){if(!k){return null}return e[k]?e[k]:null};h.readyServicePluginsWidgets=function(l){var o=window.ExtraCaja||{};var m;if(o.GS){d.each(o.GS.initAll,function(p){p(l)});try{delete o.GS.initAll}catch(n){o.GS.initAll=undefined}var k=l.markReadOnlyRecord(o.GS);d.each(k,function(p){if(d.isFunction(p)){l.markFunction(p)}});m=l.tame(k)}if(o.kplugin){d.each(o.kplugin.initAll,function(p){p(l)});try{delete o.kplugin.initAll}catch(n){o.kplugin.initAll=undefined}}return{tameGlobalService:m,kplugin:o.kplugin}};h.runScriptedMods=function(m){var n=g.DOM;var o=n.query("."+i);if(!o){return}var k=j.makeSharedFactory(m,d);var l=h.readyServicePluginsWidgets(m);d.each(o,function(r){var p=n.attr(r,"data-componentid");if(!p){return}var q=e[p];if(undefined===q){return}m.makeES5Frame(r,{rewrite:j.rewriteURL},function(w){var s=m.tame(m.markFunction(function(x,y,z){window.shop_log.sendSyncErrorLog;return true}));n.attr(w.iframe,"data-modulename",n.attr(w.div,"data-componentid"));var t=k({imports:w.imports,context:r,kplugins:l.kplugin});var u=+new Date();var v=w.contentCajoled("",q);v.run(d.mix({KISSY:t,GS:l.tameGlobalService,onerror:s},d.isFunction(window.getCajaExposed)?window.getCajaExposed(m,j):{}),function(y,x){});shop_log.sendJsMonitor(1,"设计师模块js被编译后的执行时间",p,+new Date()-u)})})};h.setup=function(){b.configure({cajaServer:a,debug:location&&(location.search||"").indexOf("caja-debug")!==-1},function(k){h.runScriptedMods(k)})};h.registerCajoledMods=function(k,l){h.addModsCajoledJS(k,l)};if(!window.TShop){window.TShop={}}window.TShop.Balcony=h})(cajaAFTB,caja,KISSY);
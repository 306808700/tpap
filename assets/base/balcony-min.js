/*! caja-kissy 2013-09-03 */
(function(){var t=KISSY,n="r4000",e=location&&-1!==(location.search||"").indexOf("caja-debug")?"http://assets.daily.taobao.net/apps/taesite/balcony/core/":"http://a.tbcdn.cn/apps/taesite/balcony/core/",r=e+n+"/caja/",o="J_TScriptedModule",i={},a={};a.addModsCajoledJS=function(n,e){2>arguments.length||t.isString(n)&&(i[n]=i[n]||";"+e+";")},a.getModsCajoledJS=function(t){return t?i[t]?i[t]:null:null},a.runScriptedMods=function(n,e){var r=KISSY.DOM,a=r.query("."+o);if(a){var u=[];t.each(e,function(t){u.push(t(n))}),t.each(a,function(e){var o=r.attr(e,"data-componentid");if(o){var a=i[o];void 0!==a&&n.makeES5Frame(e,{rewrite:cajaAFTB.rewriteURL},function(o){var i=n.tame(n.markFunction(function(n,e,r){return t.log(n,e,r),!0}));r.attr(o.iframe,"data-modulename",r.attr(o.div,"data-componentid"));var s={},c={};t.each(u,function(n){var r=n({frame:o,mod:e});!1===r.kissy?(r.kissy=void 0,t.mix(c,r)):t.mix(s,r)});var p=o.contentCajoled("",a),d=t.isFunction(window.getCajaExposed)?window.getCajaExposed(n,cajaAFTB):{},l={KISSY:n.tame(s),onerror:i};l=t.mix(d,l),l=t.mix(l,c),p.run(l,function(){})})}})}},a.setup=function(t){caja.configure({cajaServer:r,debug:location&&-1!==(location.search||"").indexOf("caja-debug")},function(n){a.runScriptedMods(n,t)})},a.registerCajoledMods=function(t,n){a.addModsCajoledJS(t,n)},window.TShop||(window.TShop={}),window.TShop.Balcony=a})();
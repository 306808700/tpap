/*!  2013-08-22 */
(function(){var t=KISSY,n="r3002",e=location&&-1!==(location.search||"").indexOf("caja-debug")?"http://assets.daily.taobao.net/apps/taesite/balcony/core/":"http://a.tbcdn.cn/apps/taesite/balcony/core/",o=e+n+"/caja/",r="J_TScriptedModule",a={},i={};i.addModsCajoledJS=function(n,e){2>arguments.length||t.isString(n)&&(a[n]=a[n]||";"+e+";")},i.getModsCajoledJS=function(t){return t?a[t]?a[t]:null:null},i.runScriptedMods=function(n,e){var o=KISSY.DOM,i=o.query("."+r);if(i){var u=[];t.each(e,function(t){u.push(t(n))}),t.each(i,function(e){var r=o.attr(e,"data-componentid");if(r){var i=a[r];void 0!==i&&n.makeES5Frame(e,{rewrite:cajaAFTB.rewriteURL},function(r){var a=n.tame(n.markFunction(function(n,e,o){return t.log(n,e,o),!0}));o.attr(r.iframe,"data-modulename",o.attr(r.div,"data-componentid"));var c={},s={};t.each(u,function(n){var o=n({frame:r,mod:e});!1===o.kissy?(o.kissy=void 0,t.mix(s,o)):t.mix(c,o)});var d=r.contentCajoled("",i),l=t.isFunction(window.getCajaExposed)?window.getCajaExposed(n,cajaAFTB):{},p={KISSY:n.tame(c),onerror:a};p=t.mix(l,p),p=t.mix(p,s),d.run(p,function(){})})}})}},i.setup=function(t){caja.configure({cajaServer:o,debug:location&&-1!==(location.search||"").indexOf("caja-debug")},function(n){i.runScriptedMods(n,t)})},i.registerCajoledMods=function(t,n){i.addModsCajoledJS(t,n)},window.TShop||(window.TShop={}),window.TShop.Balcony=i})();
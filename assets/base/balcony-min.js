/*! caja-kissy 2013-08-27 */
(function(){var t=KISSY,n="r3002",e=location&&-1!==(location.search||"").indexOf("caja-debug")?"http://assets.daily.taobao.net/apps/taesite/balcony/core/":"http://a.tbcdn.cn/apps/taesite/balcony/core/",r=e+n+"/caja/",o="J_TScriptedModule",a={},i={};i.addModsCajoledJS=function(n,e){2>arguments.length||t.isString(n)&&(a[n]=a[n]||";"+e+";")},i.getModsCajoledJS=function(t){return t?a[t]?a[t]:null:null},i.runScriptedMods=function(n,e){var r=KISSY.DOM,i=r.query("."+o);if(i){var u=[];t.each(e,function(t){u.push(t(n))}),t.each(i,function(e){var o=r.attr(e,"data-componentid");if(o){var i=a[o];void 0!==i&&n.makeES5Frame(e,{rewrite:cajaAFTB.rewriteURL},function(o){var a=n.tame(n.markFunction(function(n,e,r){return t.log(n,e,r),!0}));r.attr(o.iframe,"data-modulename",r.attr(o.div,"data-componentid"));var c={},s={};t.each(u,function(n){var r=n({frame:o,mod:e});!1===r.kissy?(r.kissy=void 0,t.mix(s,r)):t.mix(c,r)});var d=o.contentCajoled("",i),l=t.isFunction(window.getCajaExposed)?window.getCajaExposed(n,cajaAFTB):{},p={KISSY:n.tame(c),onerror:a};p=t.mix(l,p),p=t.mix(p,s),d.run(p,function(){})})}})}},i.setup=function(t){caja.configure({cajaServer:r,debug:location&&-1!==(location.search||"").indexOf("caja-debug")},function(n){i.runScriptedMods(n,t)})},i.registerCajoledMods=function(t,n){i.addModsCajoledJS(t,n)},window.TShop||(window.TShop={}),window.TShop.Balcony=i})();
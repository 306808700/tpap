/*! caja-kissy 2013-09-03 */
KISSY.add("openjs/gs/1.0/index",function(t){function n(n){var i={};return i.addListener=function(t,n){i.addListener.Fncs[t]||(i.addListener.Fncs[t]=[]),i.addListener.Fncs[t].push(n)},i.addListener.Fncs=[],function(){e.on(window,"scroll",function(){var o={scrollTop:t.DOM.scrollTop(window)};n.markReadOnlyRecord(o);var e=n.tame(o);if(i.addListener.Fncs.windowScroll)for(var a=0;i.addListener.Fncs.windowScroll.length>a;a++)i.addListener.Fncs.windowScroll[a](e)})}(),function(){function t(t,n){var e=o.create("<iframe id=''"+a+"' name='"+a+"'></iframe>");o.css(e,"display","none");var i=o.create('<form action="'+t+'" target="'+a+'" method="post"  enctype="multipart/form-data"></form>');o.css(e,"display","none");var r=o.create('<input type="hidden" name="token" value="'+n+'"/>');return i.appendChild(r),{form:i,iframe:e}}var a="tempCajaIframe";e.delegate(document,"change","input.J_TCajaUploadImg",function(a){var r=a.target,s=t(o.attr(r,"data-url"),1);o.append(r,s.form),document.body.appendChild(s.iframe),document.body.appendChild(s.form),s.form.submit();var c=function(t){if(i.addListener.Fncs.cajaupload)for(var n=0;i.addListener.Fncs.cajaupload.length>n;n++)i.addListener.Fncs.cajaupload[n](t)};e.on(window,"cajaupload",function(t){t={content:t.content},n.markReadOnlyRecord(t);var i=n.tame(t);c(i),e.remove(window,"cajaupload"),o.remove(s.iframe),o.remove(s.form)})})}(),function(){return i=n.markReadOnlyRecord(i),n.markFunction(i.addListener),{GS:n.tame(i)}}}var o=t.DOM,e=t.Event;return n});